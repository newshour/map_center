namespace("nhmc");
namespace("nhmc.geo");
namespace("nhmc.charts");
namespace("nhmc.config");
namespace("nhmc.cleanup");
namespace("nhmc.ctrl");

$(document).ready(function() {
    var patchworkIds = {
        to: {
            "Monied 'Burbs": 1,
            "Minority Central": 2,
            "Evangelical Epicenters": 3,
            "Tractor Country": 4,
            "Campus and Careers": 5,
            "Immigration Nation": 6,
            "Industrial Metropolis": 7,
            "Boom Towns": 8,
            "Service Worker Centers": 9,
            "Emptying Nests": 10,
            "Military Bastions": 11,
            "Mormon Outposts": 12
        },
        from: {
            1: "Monied 'Burbs",
            2: "Minority Central",
            3: "Evangelical Epicenters",
            4: "Tractor Country",
            5: "Campus and Careers",
            6: "Immigration Nation",
            7: "Industrial Metropolis",
            8: "Boom Towns",
            9: "Service Worker Centers",
            10: "Emptying Nests",
            11: "Military Bastions",
            12: "Mormon Outposts"
        }
    };
    var patchworkColors = {
        "Boom Towns": '#c56300',
        "Campus and Careers": '#19965c',
        "Emptying Nests": '#8ec5a8',
        "Evangelical Epicenters": '#fed579',
        "Immigration Nation": '#96cdd2',
        "Industrial Metropolis": '#4f4f4f',
        "Military Bastions": '#9878b9',
        "Minority Central": '#f08831',
        "Monied 'Burbs": '#fbbd8f',
        "Mormon Outposts": '#3379b5',
        "Service Worker Centers": '#cb4f45',
        "Tractor Country": '#dd8c92'
    };
    var patchworkCounties = {
        'Boom Towns': ['01003', '01045', '01101', '01115', '01117', '02016', '02050', '02060', '02070', '02090', '02130', '02150', '02164', '02170', '02180', '02188', '02220', '02270', '02290', '04005', '04015', '04021', '04025', '05007', '05019', '05031', '05035', '05045', '05093', '05115', '05119', '05131', '05143', '06005', '06009', '06017', '06019', '06031', '06033', '06039', '06061', '06065', '06077', '06095', '06113', '06115', '08005', '08019', '08037', '08039', '08045', '08051', '08065', '08093', '08097', '08113', '10005', '12017', '12019', '12023', '12041', '12057', '12061', '12073', '12081', '12083', '12089', '12091', '12101', '12109', '12113', '12117', '12119', '12127', '12129', '12131', '13009', '13011', '13015', '13021', '13029', '13031', '13045', '13051', '13057', '13073', '13077', '13095', '13097', '13103', '13113', '13117', '13123', '13135', '13139', '13157', '13177', '13179', '13183', '13185', '13187', '13219', '13223', '13227', '13247', '13281', '13291', '13297', '13311', '15001', '16001', '16005', '16013', '16019', '16027', '16055', '16057', '17029', '17111', '17197', '18003', '18035', '18141', '19013', '19113', '19169', '20037', '20051', '20055', '20061', '20111', '20173', '20193', '21015', '21035', '21041', '21049', '21067', '21113', '21117', '21151', '21163', '21185', '21215', '21227', '22055', '22061', '22063', '22069', '22073', '22103', '24009', '24013', '24017', '24021', '24025', '24035', '24041', '24045', '26061', '26065', '26073', '26077', '26093', '27007', '27009', '27013', '27019', '27025', '27027', '27103', '27109', '27131', '27139', '27141', '27145', '27149', '27169', '28033', '28035', '28047', '28049', '28071', '28073', '28087', '28089', '28105', '28121', '29019', '29027', '29031', '29037', '29077', '29097', '29101', '29113', '29147', '29161', '29165', '29183', '29219', '30031', '30063', '30081', '31019', '31043', '31055', '31109', '31153', '31159', '31179', '32003', '32005', '32019', '32023', '32031', '33017', '35009', '35041', '35043', '36023', '37019', '37049', '37053', '37055', '37063', '37069', '37081', '37093', '37101', '37119', '37129', '37141', '37147', '37179', '37183', '37189', '38017', '38035', '38077', '39017', '39057', '39133', '39165', '39173', '40017', '40021', '40031', '40039', '40065', '40109', '40123', '40139', '40143', '40151', '41003', '41017', '41067', '41071', '42089', '42103', '45013', '45015', '45035', '45051', '45077', '45079', '45091', '46011', '46083', '46093', '46099', '46103', '46113', '47037', '47113', '47117', '47119', '47125', '47141', '47149', '47155', '47167', '47183', '47187', '47189', '48007', '48019', '48021', '48027', '48041', '48053', '48085', '48091', '48113', '48121', '48135', '48139', '48143', '48157', '48173', '48183', '48187', '48209', '48221', '48227', '48251', '48257', '48259', '48303', '48309', '48311', '48329', '48347', '48355', '48359', '48367', '48373', '48375', '48381', '48397', '48407', '48439', '48441', '48449', '48451', '48453', '48471', '48473', '48487', '48491', '48493', '48497', '49035', '49037', '49043', '49053', '50007', '51041', '51061', '51065', '51069', '51079', '51085', '51095', '51099', '51107', '51121', '51145', '51147', '51149', '51153', '51177', '51179', '51540', '51630', '51660', '51678', '51680', '51683', '51700', '51840', '53011', '53029', '53031', '53035', '53037', '53045', '53053', '53057', '53071', '53073', '54003', '55009', '55033', '55035', '55063', '55093', '55097', '55139', '56001', '56021', '56025', '56039', '56041'],
        'Campus and Careers': ['01081', '01125', '04019', '06045', '06097', '08013', '09007', '09011', '12001', '13059', '17005', '17019', '17037', '17077', '17113', '17119', '17143', '17167', '18105', '18157', '19061', '19103', '19163', '20045', '20099', '20177', '21205', '25003', '25005', '25009', '25011', '25015', '25021', '25023', '25027', '26161', '33005', '33009', '36003', '37135', '39009', '39063', '39065', '39095', '39117', '39119', '39153', '39157', '40027', '40119', '41039', '42035', '42049', '42119', '46005', '46027', '46127', '47093', '47135', '50001', '51003', '51750', '51830', '53075', '54009', '54039', '54061', '54067', '54075', '54085', '54095', '54103', '55025'],
        'Emptying Nests': ['12021', '12035', '12053', '12055', '12069', '12071', '12095', '12097', '12111', '12115', '13039', '13063', '13151', '13217', '17011', '17015', '17041', '17053', '17073', '17075', '17085', '17103', '17105', '17123', '17131', '17139', '17171', '17173', '17177', '17189', '17195', '18001', '18005', '18031', '18073', '18087', '18101', '18137', '18181', '19001', '19005', '19011', '19017', '19019', '19023', '19025', '19029', '19031', '19033', '19035', '19037', '19041', '19043', '19045', '19055', '19059', '19063', '19065', '19067', '19069', '19073', '19075', '19079', '19081', '19083', '19087', '19089', '19091', '19093', '19095', '19097', '19099', '19105', '19107', '19109', '19123', '19125', '19127', '19131', '19133', '19139', '19143', '19145', '19147', '19149', '19151', '19157', '19161', '19171', '19173', '19177', '19187', '19189', '19191', '19195', '19197', '20085', '20113', '20123', '20147', '24043', '26009', '26015', '26063', '26081', '26117', '26121', '26123', '26133', '26145', '27005', '27015', '27017', '27023', '27033', '27039', '27041', '27043', '27045', '27047', '27049', '27055', '27063', '27067', '27069', '27071', '27075', '27077', '27079', '27085', '27089', '27091', '27093', '27095', '27099', '27101', '27111', '27119', '27121', '27127', '27129', '27133', '27135', '27143', '27147', '27151', '27153', '27157', '27161', '27167', '27173', '29005', '31021', '31035', '31039', '31051', '31053', '31067', '31073', '31095', '31097', '31099', '31105', '31131', '31137', '31139', '31143', '31155', '31167', '36021', '36057', '36117', '36123', '38031', '38067', '38073', '38081', '38093', '38099', '39005', '39011', '39033', '39039', '39069', '39099', '39101', '39123', '39143', '39149', '39151', '39161', '39169', '39171', '39175', '42025', '42037', '42055', '42057', '42067', '42081', '42087', '42097', '42099', '42107', '42109', '46009', '46013', '46035', '46039', '46051', '46057', '46065', '46077', '46079', '46101', '46125', '48477', '51005', '51015', '51139', '51163', '51171', '55005', '55011', '55019', '55021', '55027', '55029', '55039', '55045', '55047', '55055', '55065', '55069', '55077', '55081', '55083', '55091', '55095', '55111', '55115', '55117', '55119', '55121', '55123', '55135', '55141'],
        'Evangelical Epicenters': ['01009', '01015', '01019', '01021', '01027', '01029', '01031', '01033', '01039', '01041', '01043', '01049', '01055', '01057', '01059', '01061', '01069', '01071', '01075', '01077', '01079', '01083', '01093', '01095', '01103', '01111', '01123', '01127', '01133', '05001', '05003', '05005', '05009', '05013', '05015', '05021', '05023', '05025', '05029', '05033', '05037', '05047', '05049', '05051', '05053', '05055', '05057', '05059', '05061', '05063', '05065', '05067', '05071', '05075', '05081', '05083', '05087', '05089', '05091', '05097', '05101', '05105', '05109', '05111', '05113', '05117', '05121', '05127', '05129', '05133', '05135', '05137', '05141', '05145', '05149', '08035', '12003', '12027', '12029', '12037', '12059', '12067', '12075', '12093', '12121', '12133', '13001', '13003', '13005', '13019', '13025', '13055', '13071', '13111', '13115', '13119', '13129', '13137', '13143', '13147', '13161', '13201', '13213', '13229', '13233', '13241', '13257', '13295', '13299', '13305', '13313', '17023', '17025', '17045', '17047', '17191', '18071', '18145', '19119', '19141', '20001', '20033', '20115', '20125', '21005', '21007', '21017', '21021', '21023', '21027', '21031', '21033', '21039', '21045', '21053', '21055', '21073', '21075', '21081', '21083', '21087', '21091', '21097', '21099', '21101', '21103', '21105', '21107', '21121', '21123', '21125', '21137', '21139', '21141', '21143', '21145', '21149', '21157', '21161', '21167', '21169', '21171', '21177', '21179', '21183', '21187', '21191', '21199', '21203', '21207', '21213', '21217', '21219', '21221', '21231', '21233', '21235', '22011', '22043', '22059', '26113', '27117', '28003', '28013', '28039', '28057', '28067', '28081', '28109', '28115', '28117', '28129', '28139', '28141', '28145', '28155', '29007', '29009', '29011', '29013', '29015', '29017', '29025', '29033', '29039', '29043', '29057', '29059', '29061', '29065', '29067', '29069', '29073', '29079', '29081', '29083', '29085', '29091', '29103', '29105', '29109', '29111', '29115', '29119', '29121', '29123', '29125', '29129', '29135', '29141', '29145', '29149', '29153', '29155', '29159', '29167', '29169', '29171', '29175', '29185', '29195', '29197', '29199', '29203', '29205', '29211', '29215', '29225', '29227', '29229', '30069', '31009', '31085', '31103', '31115', '31117', '37003', '37009', '37021', '37023', '37027', '37039', '37045', '37071', '37087', '37089', '37111', '37113', '37115', '37121', '37149', '37161', '37167', '37175', '37193', '37199', '39075', '39111', '40005', '40009', '40011', '40013', '40015', '40019', '40023', '40025', '40035', '40041', '40043', '40045', '40049', '40051', '40057', '40059', '40061', '40063', '40067', '40069', '40077', '40079', '40081', '40085', '40087', '40091', '40093', '40095', '40097', '40099', '40101', '40103', '40105', '40111', '40115', '40117', '40125', '40127', '40129', '40133', '40137', '40147', '40149', '40153', '41015', '45007', '45021', '45045', '45057', '45073', '45083', '47001', '47005', '47009', '47011', '47013', '47015', '47017', '47019', '47025', '47027', '47029', '47033', '47035', '47039', '47041', '47045', '47049', '47053', '47055', '47057', '47061', '47063', '47065', '47067', '47071', '47073', '47079', '47081', '47087', '47089', '47091', '47099', '47103', '47107', '47109', '47121', '47123', '47129', '47131', '47133', '47137', '47139', '47145', '47153', '47177', '47179', '47181', '47185', '48005', '48011', '48023', '48033', '48037', '48045', '48049', '48059', '48063', '48067', '48073', '48075', '48077', '48079', '48081', '48083', '48087', '48093', '48099', '48101', '48119', '48125', '48129', '48133', '48147', '48151', '48155', '48159', '48165', '48179', '48181', '48191', '48193', '48197', '48199', '48203', '48205', '48207', '48211', '48217', '48223', '48225', '48231', '48233', '48237', '48241', '48253', '48263', '48267', '48269', '48275', '48277', '48289', '48291', '48313', '48327', '48333', '48337', '48343', '48345', '48353', '48361', '48363', '48365', '48383', '48385', '48387', '48401', '48403', '48411', '48417', '48419', '48429', '48433', '48437', '48447', '48455', '48457', '48459', '48467', '48483', '48503', '51011', '51017', '51031', '51037', '51071', '51105', '51141', '51165', '51520', '51530', '51550', '51640', '51820', '54031'],
        'Immigration Nation': ['04003', '04009', '04012', '04013', '04023', '04027', '06001', '06011', '06021', '06025', '06029', '06047', '06051', '06071', '06099', '06101', '06103', '06107', '08001', '08003', '08011', '08021', '08023', '08055', '08071', '08087', '08089', '08099', '08101', '08105', '08109', '08123', '08125', '12043', '12049', '12051', '12086', '16053', '16067', '16073', '16087', '17017', '18023', '18113', '19021', '19047', '19115', '19193', '20057', '20067', '20069', '20075', '20081', '20093', '20175', '20187', '20189', '20203', '22023', '26127', '27105', '27165', '31047', '31079', '31119', '31141', '31151', '32007', '32011', '32013', '32027', '35001', '35005', '35006', '35007', '35011', '35013', '35015', '35017', '35019', '35021', '35023', '35025', '35027', '35029', '35033', '35035', '35037', '35039', '35047', '35051', '35053', '35055', '35057', '35061', '36085', '37061', '37105', '37123', '37151', '37171', '41027', '41031', '41045', '41049', '46043', '47003', '48003', '48013', '48015', '48017', '48025', '48039', '48043', '48047', '48055', '48057', '48061', '48069', '48089', '48095', '48097', '48103', '48105', '48107', '48109', '48111', '48115', '48117', '48123', '48127', '48131', '48137', '48141', '48149', '48153', '48163', '48169', '48171', '48175', '48177', '48185', '48189', '48195', '48215', '48219', '48239', '48247', '48249', '48255', '48261', '48271', '48273', '48279', '48283', '48285', '48287', '48295', '48297', '48301', '48305', '48307', '48317', '48321', '48323', '48325', '48331', '48335', '48341', '48349', '48357', '48369', '48371', '48377', '48389', '48391', '48399', '48409', '48413', '48415', '48421', '48431', '48435', '48443', '48445', '48461', '48463', '48465', '48469', '48475', '48479', '48481', '48489', '48495', '48501', '48505', '48507', '53001', '53007', '53017', '53025', '53047', '53077', '55127'],
        'Industrial Metropolis': ['06037', '06085', '08031', '09003', '09009', '11001', '12031', '13121', '17031', '17163', '18097', '21111', '24510', '26163', '27123', '29095', '29510', '34001', '34007', '34013', '34017', '34023', '34031', '34039', '36001', '36005', '36029', '36047', '36055', '36061', '36067', '36081', '39035', '39049', '39061', '42003', '42101', '44007', '47157', '48201', '48339', '55079'],
        'Military Bastions': ['01051', '01089', '02020', '02068', '02240', '08041', '12009', '12033', '13013', '13053', '13153', '13215', '13245', '16033', '16039', '18121', '20005', '20027', '20041', '20043', '20103', '20161', '20209', '21047', '21093', '22015', '22115', '23023', '24003', '24037', '28059', '32009', '36045', '37051', '37085', '37137', '38101', '39113', '40029', '40033', '40047', '40055', '40075', '40141', '45055', '45085', '47031', '47127', '47161', '48029', '48485', '51053', '51570', '51650', '51710', '51740', '51810', '53067'],
        'Minority Central': ['01005', '01007', '01011', '01013', '01017', '01023', '01025', '01035', '01037', '01047', '01053', '01063', '01065', '01067', '01073', '01085', '01087', '01091', '01097', '01099', '01105', '01107', '01109', '01113', '01119', '01121', '01129', '01131', '02013', '02201', '02198', '02232', '02230', '04001', '04017', '05011', '05017', '05027', '05039', '05041', '05043', '05069', '05073', '05077', '05079', '05095', '05099', '05103', '05107', '05123', '05139', '05147', '12039', '12047', '12077', '12079', '12125', '13007', '13017', '13023', '13027', '13033', '13035', '13037', '13043', '13049', '13061', '13065', '13069', '13075', '13079', '13081', '13087', '13091', '13093', '13099', '13101', '13105', '13107', '13109', '13127', '13131', '13141', '13155', '13163', '13165', '13167', '13171', '13173', '13175', '13181', '13189', '13191', '13193', '13197', '13199', '13205', '13209', '13221', '13225', '13235', '13239', '13243', '13249', '13251', '13253', '13255', '13259', '13261', '13263', '13265', '13267', '13269', '13271', '13273', '13275', '13277', '13279', '13283', '13285', '13287', '13289', '13293', '13301', '13303', '13307', '13309', '13315', '13317', '13319', '13321', '15005', '17003', '17153', '18089', '21119', '21153', '22001', '22003', '22007', '22009', '22013', '22017', '22019', '22021', '22025', '22027', '22029', '22031', '22033', '22035', '22037', '22039', '22041', '22045', '22047', '22049', '22051', '22053', '22065', '22067', '22071', '22075', '22077', '22079', '22081', '22083', '22085', '22089', '22091', '22093', '22097', '22099', '22101', '22105', '22107', '22109', '22111', '22113', '22117', '22119', '22121', '22123', '22125', '22127', '24019', '24039', '26049', '28001', '28005', '28007', '28009', '28011', '28015', '28017', '28019', '28021', '28023', '28025', '28027', '28029', '28031', '28037', '28041', '28043', '28051', '28053', '28055', '28061', '28063', '28065', '28069', '28075', '28077', '28079', '28083', '28085', '28091', '28093', '28095', '28097', '28099', '28101', '28103', '28107', '28111', '28113', '28119', '28123', '28125', '28127', '28131', '28133', '28135', '28137', '28143', '28147', '28149', '28151', '28153', '28157', '28159', '28161', '28163', '30003', '30035', '30085', '30087', '31173', '32021', '34011', '35031', '35045', '37007', '37013', '37015', '37017', '37033', '37041', '37047', '37065', '37073', '37077', '37079', '37083', '37091', '37103', '37107', '37117', '37127', '37131', '37139', '37145', '37153', '37155', '37163', '37165', '37177', '37181', '37185', '37187', '37195', '38005', '38079', '45001', '45003', '45005', '45009', '45011', '45017', '45019', '45023', '45025', '45027', '45029', '45031', '45033', '45037', '45039', '45041', '45047', '45049', '45053', '45059', '45061', '45065', '45067', '45069', '45071', '45075', '45081', '45087', '45089', '46007', '46017', '46023', '46031', '46071', '46095', '46137', '47069', '47075', '47095', '47097', '48001', '48145', '48229', '48245', '48315', '48351', '48395', '48405', '48427', '51007', '51025', '51029', '51036', '51049', '51057', '51081', '51083', '51097', '51111', '51117', '51131', '51135', '51159', '51175', '51181', '51183', '51193', '51590', '51595', '51620', '51670', '51690', '51730', '51760', '53019', '54047', '55078'],
        'Monied \'Burbs': ['01001', '02110', '05085', '05125', '06013', '06041', '06043', '06053', '06055', '06057', '06059', '06067', '06069', '06073', '06075', '06079', '06081', '06083', '06087', '06109', '06111', '08007', '08014', '08027', '08047', '08049', '08059', '08067', '08069', '08077', '08079', '08085', '08091', '08107', '08117', '08119', '09001', '09005', '09013', '10003', '12011', '12015', '12065', '12085', '12099', '12103', '12105', '13047', '13067', '13085', '13089', '13145', '13159', '13169', '13207', '13211', '13231', '13237', '15007', '15009', '16015', '16017', '16085', '17007', '17043', '17063', '17089', '17091', '17093', '17097', '17133', '17141', '17179', '17203', '18011', '18019', '18029', '18057', '18059', '18063', '18081', '18109', '18127', '18173', '19049', '19153', '19155', '19181', '20015', '20091', '20121', '21029', '21209', '21211', '21239', '22005', '22095', '23005', '24005', '24015', '24027', '24031', '24033', '25001', '25007', '25017', '25019', '25025', '26005', '26037', '26045', '26055', '26087', '26089', '26091', '26099', '26111', '26115', '26125', '26139', '26159', '27003', '27031', '27037', '27053', '27059', '27163', '27171', '28045', '29029', '29047', '29071', '29099', '29177', '29189', '29209', '29213', '30029', '30043', '31177', '32029', '32510', '33001', '33003', '33011', '33015', '34003', '34005', '34015', '34019', '34021', '34025', '34027', '34033', '34035', '34037', '34041', '35028', '35049', '36027', '36059', '36069', '36071', '36079', '36087', '36091', '36103', '36119', '37001', '37025', '37029', '37031', '37035', '37037', '37043', '37057', '37059', '37067', '37097', '37109', '37125', '37159', '38015', '39025', '39041', '39045', '39055', '39085', '39089', '39093', '39097', '39103', '39109', '39129', '39159', '40131', '40145', '41005', '41009', '41013', '41047', '41051', '41053', '42011', '42017', '42019', '42029', '42041', '42045', '42053', '42075', '42077', '42091', '42095', '42133', '44001', '44003', '44005', '44009', '45043', '45063', '46033', '47021', '47047', '47105', '47147', '47165', '48031', '48071', '48167', '48213', '48243', '48299', '48379', '48423', '48425', '48499', '50011', '50013', '51013', '51019', '51023', '51033', '51043', '51047', '51059', '51073', '51075', '51087', '51093', '51101', '51109', '51115', '51119', '51127', '51133', '51137', '51157', '51161', '51187', '51199', '51510', '51600', '51610', '51685', '51735', '51775', '51800', '53005', '53021', '53033', '53055', '53061', '54037', '54079', '55001', '55015', '55087', '55089', '55101', '55105', '55109', '55131', '55133', '56005', '56035'],
        'Mormon Outposts': ['06003', '16007', '16011', '16023', '16029', '16031', '16041', '16043', '16051', '16063', '16065', '16071', '16077', '16081', '29003', '32017', '49001', '49003', '49005', '49007', '49009', '49011', '49013', '49015', '49017', '49021', '49023', '49025', '49027', '49029', '49031', '49033', '49039', '49041', '49045', '49047', '49049', '49051', '49055', '49057', '53039', '56003', '56023'],
        'Service Worker Centers': ['02122', '02185', '04007', '06007', '06015', '06023', '06027', '06035', '06063', '06089', '06105', '08015', '08025', '08033', '08043', '08053', '08075', '09015', '10001', '12005', '12007', '12013', '12045', '12063', '12087', '12107', '12123', '13083', '13133', '13149', '13195', '15003', '16009', '16045', '16061', '16069', '16075', '16079', '17001', '17009', '17013', '17021', '17027', '17033', '17035', '17039', '17049', '17051', '17055', '17057', '17059', '17061', '17065', '17067', '17071', '17079', '17081', '17083', '17087', '17095', '17099', '17101', '17107', '17115', '17117', '17121', '17125', '17127', '17135', '17137', '17145', '17149', '17151', '17155', '17157', '17159', '17161', '17165', '17169', '17175', '17181', '17183', '17185', '17187', '17193', '17199', '17201', '18007', '18009', '18013', '18015', '18017', '18021', '18025', '18027', '18033', '18037', '18039', '18041', '18043', '18045', '18047', '18049', '18051', '18053', '18055', '18061', '18065', '18067', '18069', '18075', '18077', '18079', '18083', '18085', '18091', '18093', '18095', '18099', '18103', '18107', '18111', '18115', '18117', '18119', '18123', '18125', '18129', '18131', '18133', '18135', '18139', '18143', '18147', '18149', '18151', '18153', '18155', '18159', '18161', '18163', '18165', '18167', '18169', '18171', '18175', '18177', '18179', '18183', '19003', '19007', '19027', '19039', '19051', '19053', '19057', '19071', '19085', '19111', '19117', '19129', '19135', '19137', '19165', '19175', '19179', '20003', '20009', '20011', '20021', '20029', '20035', '20059', '20079', '20095', '20133', '20137', '20139', '20155', '20169', '20181', '20191', '20205', '21003', '21009', '21011', '21013', '21019', '21025', '21037', '21043', '21051', '21057', '21059', '21061', '21063', '21065', '21069', '21071', '21077', '21079', '21085', '21089', '21095', '21109', '21115', '21127', '21129', '21131', '21133', '21135', '21147', '21155', '21159', '21165', '21173', '21175', '21181', '21193', '21195', '21197', '21201', '21223', '21225', '21229', '21237', '22057', '22087', '23001', '23003', '23007', '23009', '23011', '23013', '23015', '23017', '23019', '23021', '23025', '23027', '23029', '23031', '24001', '24011', '24023', '24029', '24047', '25013', '26001', '26003', '26007', '26011', '26013', '26017', '26019', '26021', '26023', '26025', '26027', '26029', '26031', '26033', '26035', '26039', '26041', '26043', '26047', '26051', '26053', '26057', '26059', '26067', '26069', '26071', '26075', '26079', '26083', '26085', '26095', '26097', '26101', '26103', '26105', '26107', '26109', '26119', '26129', '26131', '26135', '26137', '26141', '26143', '26147', '26149', '26151', '26153', '26155', '26157', '26165', '27001', '27021', '27029', '27035', '27057', '27061', '27065', '27083', '27087', '27097', '27113', '27115', '27125', '27137', '27159', '29001', '29021', '29023', '29035', '29045', '29049', '29051', '29053', '29055', '29063', '29075', '29093', '29107', '29117', '29127', '29131', '29133', '29137', '29139', '29143', '29151', '29157', '29163', '29173', '29179', '29181', '29186', '29187', '29201', '29207', '29221', '29223', '30023', '30049', '30053', '30061', '30093', '30111', '31001', '31013', '31023', '31025', '31033', '31045', '31101', '31111', '31145', '32033', '33007', '33013', '33019', '34009', '34029', '36007', '36009', '36011', '36013', '36015', '36017', '36019', '36025', '36031', '36033', '36035', '36037', '36039', '36041', '36043', '36049', '36051', '36053', '36063', '36065', '36073', '36075', '36077', '36083', '36089', '36093', '36095', '36097', '36099', '36101', '36105', '36107', '36111', '36113', '36115', '36121', '37005', '37011', '37075', '37095', '37099', '37133', '37143', '37157', '37169', '37173', '37191', '37197', '38071', '38085', '39001', '39003', '39007', '39013', '39015', '39019', '39021', '39023', '39027', '39029', '39031', '39037', '39043', '39047', '39051', '39053', '39059', '39067', '39071', '39073', '39077', '39079', '39081', '39083', '39087', '39091', '39105', '39107', '39115', '39121', '39125', '39127', '39131', '39135', '39137', '39139', '39141', '39145', '39147', '39155', '39163', '39167', '40001', '40037', '40071', '40083', '40089', '40107', '40113', '40121', '40135', '41001', '41007', '41011', '41019', '41029', '41033', '41035', '41041', '41043', '41057', '41059', '41061', '41065', '42001', '42005', '42007', '42009', '42013', '42015', '42021', '42023', '42031', '42033', '42039', '42043', '42047', '42051', '42059', '42061', '42063', '42065', '42069', '42071', '42073', '42079', '42083', '42085', '42093', '42105', '42111', '42113', '42115', '42117', '42121', '42123', '42125', '42127', '42129', '42131', '46029', '46041', '46081', '46121', '46135', '47007', '47023', '47043', '47051', '47059', '47077', '47083', '47085', '47101', '47111', '47115', '47143', '47151', '47159', '47163', '47169', '47171', '47173', '47175', '48293', '49019', '50003', '50005', '50009', '50015', '50019', '50021', '50023', '50025', '50027', '51001', '51009', '51021', '51027', '51035', '51045', '51051', '51063', '51067', '51077', '51089', '51125', '51143', '51155', '51167', '51169', '51173', '51185', '51191', '51195', '51197', '51515', '51580', '51720', '51770', '51790', '53003', '53009', '53015', '53027', '53041', '53049', '53051', '53059', '53063', '53065', '54001', '54005', '54007', '54011', '54013', '54015', '54017', '54019', '54021', '54023', '54025', '54027', '54029', '54033', '54035', '54041', '54043', '54045', '54049', '54051', '54053', '54055', '54057', '54059', '54063', '54065', '54069', '54071', '54073', '54077', '54081', '54083', '54087', '54089', '54091', '54093', '54097', '54099', '54101', '54105', '54107', '54109', '55003', '55007', '55013', '55017', '55023', '55031', '55037', '55041', '55043', '55049', '55051', '55053', '55057', '55059', '55061', '55067', '55071', '55073', '55075', '55085', '55099', '55103', '55107', '55113', '55125', '55129', '55137'],
        'Tractor Country': ['02100', '02261', '02280', '02275', '02282', '04011', '06049', '06091', '06093', '08009', '08017', '08029', '08057', '08061', '08063', '08073', '08081', '08083', '08095', '08103', '08111', '08115', '08121', '16003', '16021', '16025', '16035', '16037', '16047', '16049', '16059', '16083', '17069', '17129', '17147', '19009', '19015', '19077', '19101', '19121', '19159', '19167', '19183', '19185', '20007', '20013', '20017', '20019', '20023', '20025', '20031', '20039', '20047', '20049', '20053', '20063', '20065', '20071', '20073', '20077', '20083', '20087', '20089', '20097', '20101', '20105', '20107', '20109', '20117', '20119', '20127', '20129', '20131', '20135', '20141', '20143', '20145', '20149', '20151', '20153', '20157', '20159', '20163', '20165', '20167', '20171', '20179', '20183', '20185', '20195', '20197', '20199', '20201', '20207', '21001', '21189', '27011', '27051', '27073', '27081', '27107', '27155', '29041', '29087', '29089', '29217', '30001', '30005', '30007', '30009', '30011', '30013', '30015', '30017', '30019', '30021', '30025', '30027', '30033', '30037', '30039', '30041', '30045', '30047', '30051', '30055', '30057', '30059', '30065', '30067', '30071', '30073', '30075', '30077', '30079', '30083', '30089', '30091', '30095', '30097', '30099', '30101', '30103', '30105', '30107', '30109', '31003', '31005', '31007', '31011', '31015', '31017', '31027', '31029', '31031', '31037', '31041', '31049', '31057', '31059', '31061', '31063', '31065', '31069', '31071', '31075', '31077', '31081', '31083', '31087', '31089', '31091', '31093', '31107', '31113', '31121', '31123', '31125', '31127', '31129', '31133', '31135', '31147', '31149', '31157', '31161', '31163', '31165', '31169', '31171', '31175', '31181', '31183', '31185', '32001', '32015', '35003', '35059', '38001', '38003', '38007', '38009', '38011', '38013', '38019', '38021', '38023', '38025', '38027', '38029', '38033', '38037', '38039', '38041', '38043', '38045', '38047', '38049', '38051', '38053', '38055', '38057', '38059', '38061', '38063', '38065', '38069', '38075', '38083', '38087', '38089', '38091', '38095', '38097', '38103', '38105', '40003', '40007', '40053', '40073', '41021', '41023', '41037', '41055', '41063', '41069', '46003', '46015', '46019', '46021', '46025', '46037', '46045', '46047', '46049', '46053', '46055', '46059', '46061', '46063', '46067', '46069', '46073', '46075', '46085', '46087', '46089', '46091', '46097', '46105', '46107', '46109', '46111', '46115', '46117', '46119', '46123', '46129', '48009', '48035', '48051', '48065', '48161', '48235', '48265', '48281', '48319', '48393', '50017', '51091', '51103', '51113', '53013', '53023', '53043', '53069', '56007', '56009', '56011', '56013', '56015', '56017', '56019', '56027', '56029', '56031', '56033', '56037', '56043', '56045']
    };
    
    $('#displays').append('<li id="patchwork_counties"><a href="#">Show Patchwork Nation county types</a></li>');
    $('#patchwork_counties a').click(function() {
        nhmc.cleanup.clearMap();
        
        // add local references for performance reasons
        var countyGeo = nhmc.geo.countyGeo;
        var usGeo = nhmc.geo.usGeo;
        var FIPSToCounty = nhmc.config.FIPSToCounty;
        
        function fillCounties(i, clearFill) {
            // default clearFill to false
            clearFill = (typeof clearFill == 'undefined') ? false : clearFill;
            var countyType = patchworkIds.from[i];
            var countyList = patchworkCounties[countyType];
            if (clearFill) {
                var countyFill = nhmc.config.styleColors['default'];
            } else {
                var countyFill = patchworkColors[countyType];
            }
            for (var j = 0, length = countyList.length; j < length; j++) {
                var fips = countyList[j];
                var mapView = $('#map_view').val();
                if (mapView == 'us_counties') {
                    var countyPath = countyGeo[fips];
                    // There are three Alaska county-equivalent areas with names
                    // and FIPS codes that changed. The old and new FIPS codes
                    // are included in countyList, so just ignore the new ones
                    // for this particular map.
                    if (countyPath != undefined) {
                        countyGeo[fips].setFill(countyFill);
                    }
                } else if (mapView == 'us_all') {
                    // do nothing
                } else {
                    var FIPSData = FIPSToCounty[fips];
                    // See comment in us_counties condition. For the state maps,
                    // ignore the old FIPS codes instead.
                    if (FIPSData != undefined) {
                        var state = FIPSData[0];
                        var county = FIPSData[1];
                        var stateCountyPath = usGeo[state].countyPaths[county.replace(/ /g, '_')];
                        if (stateCountyPath != undefined) {
                            stateCountyPath.setFill(countyFill);
                        }
                    }
                }
            }
        }
        
        $('#legend').append('<div id="patchwork_legend"><h3>Patchwork Nation county types</h3><ul id="patchwork_legend"></ul></div>');
        for (var i = 1; i <= 12; i++) {
            var countyType = patchworkIds.from[i];
            $('#patchwork_legend ul').append('<li><a href="#" id="patchwork_legend_' + i + '" class="county_type selected" style="background-color: ' + patchworkColors[patchworkIds.from[i]] + ';">' + countyType + '</a></li>');
        }
        $('#patchwork_legend ul').append('<li><a href="#" id="patchwork_legend_show_all" class="control_all">Show all</a></li>');
        $('#patchwork_legend ul').append('<li><a href="#" id="patchwork_legend_clear_all" class="control_all">Clear all</a></li>');
        nhmc.cleanup.futureGarbage.push($('#patchwork_legend'));
        $('#legend').hide();
        $('#legend').slideDown(500);
        
        for (var i = 1; i <= 12; i++) {fillCounties(i);}
        
        $('#patchwork_legend .county_type').click(function() {
            var countyTypeId = parseInt($(this).attr('id').substring(17));
            var selected = $(this).hasClass('selected');
            if (selected) {
                fillCounties(countyTypeId, true);
                $(this).removeClass('selected');
            } else {
                fillCounties(countyTypeId, false);
                $(this).addClass('selected');
            }
            return false;
        });
        
        $('#patchwork_legend .control_all').click(function() {
            var show = $(this).attr('id') == 'patchwork_legend_show_all';
            if (show) {
                for (var i = 1; i <= 12; i++) {
                    fillCounties(i, false);
                    $('#patchwork_legend_' + i).addClass('selected');
                }
            } else {
                for (var i = 1; i <= 12; i++) {
                    fillCounties(i, true);
                    $('#patchwork_legend_' + i).removeClass('selected');
                }
            }
            return false;
        });
        
        return false;
    });
});
