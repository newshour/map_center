/*!
 * Bez v1.0.10-g5ae0136
 * http://github.com/rdallasgray/bez
 * 
 * A plugin to convert CSS3 cubic-bezier co-ordinates to jQuery-compatible easing functions
 * 
 * With thanks to Nikolay Nemshilov for clarification on the cubic-bezier maths
 * See http://st-on-it.blogspot.com/2011/05/calculating-cubic-bezier-function.html
 * 
 * Copyright 2011 Robert Dallas Gray. All rights reserved.
 * Provided under the FreeBSD license: https://github.com/rdallasgray/bez/blob/master/LICENSE.txt
*/jQuery.extend({bez:function(a){var b="bez_"+$.makeArray(arguments).join("_").replace(".","p");if(typeof jQuery.easing[b]!="function"){var c=function(a,b){var c=[null,null],d=[null,null],e=[null,null],f=function(f,g){return e[g]=3*a[g],d[g]=3*(b[g]-a[g])-e[g],c[g]=1-e[g]-d[g],f*(e[g]+f*(d[g]+f*c[g]))},g=function(a){return e[0]+a*(2*d[0]+3*c[0]*a)},h=function(a){var b=a,c=0,d;while(++c<14){d=f(b,0)-a;if(Math.abs(d)<.001)break;b-=d/g(b)}return b};return function(a){return f(h(a),1)}};jQuery.easing[b]=function(b,d,e,f,g){return f*c([a[0],a[1]],[a[2],a[3]])(d/g)+e}}return b}});
/*!
 * Roto v1.2.2-g51f2281
 * http://github.com/rdallasgray/roto
 * 
 * A simple, flexible, touch-capable scrolling plugin for jQuery
 * 
 * Copyright 2011 Robert Dallas Gray. All rights reserved.
 * Provided under the FreeBSD license: https://github.com/rdallasgray/roto/blob/master/LICENSE.txt
*/(function(a){a.fn.roto=function(b){var c={compat:!1,btnPrev:".prev",btnNext:".next",direction:"h",shift_duration:200,shift_bezier:[0,0,0,1],drift_duration:1800,drift_factor:500,drift_bezier:[0,0,.3,1],bounce_duration:400,bounce_bezier:[0,.5,.5,1],pull_divisor:1.7,timer_interval:50,disable_transitions:!1,startOffset:0,endOffset:0,snap:!0},b=a.extend(c,b||{}),d=1e3,e="client",f=function(){try{return document.createEvent("TouchEvent"),!0}catch(a){return!1}}(),g=f?{start:"touchstart",move:"touchmove",end:"touchend"}:{start:"mousedown",move:"mousemove",end:"mouseup"},h=function(a){return f&&typeof a.originalEvent.touches!="undefined"?a.originalEvent.touches[0]:a},i=null,j=null,k=null,l=null,m={h:{measure:"Width",offsetName:"left",coOrd:"X"},v:{measure:"Height",offsetName:"top",coOrd:"Y"}},n=m[b.direction];if(!b.disable_transitions){var o=document.body||document.documentElement,p={transform:"transform",MozTransform:"-moz-transform",WebkitTransform:"-webkit-transform"},q={transition:{prop:"transition",event:"transitionend"},MozTransition:{prop:"-moz-transition",event:"transitionend"},WebkitTransition:{prop:"-webkit-transition",event:"webkitTransitionEnd"}};for(var r in p)if(typeof o.style[r]!="undefined"){i=p[r];break}for(var r in q)if(typeof o.style[r]!="undefined"){j=q[r].prop,k=q[r].event;break}}var s=j!==null;return this.each(function(){var l=a(this),m=l.children().first(),o=m.children(),p=0,q=b.startOffset,r=0,t=0,u=-1,v=0,w=0,x=typeof l.attr("id")!==undefined?l.attr("id"):"roto"+(new Date).getTime(),y=null,z=null,A={ready:"ready",tracking:"tracking",drifting:"drifting",shifting:"shifting",bouncing:"bouncing"},B=A.ready,C=!1,D=l.find(b.btnPrev),E=l.find(b.btnNext),F=null,G=function(c,e,f,g,h){var i=h;if(!C||!s)i=function(){P(),h()},C=!0;if(s){var j=I();j.timingFunction[g]===undefined&&(j.timingFunction[g]=["cubic-bezier(",b[g+"_bezier"].join(","),")"].join(""));var l={};l[j.durationProp]=f/d+"s",l[j.timingFunctionProp]=z.timingFunction[g],c.css(l),c.data("animationCallback",i),c.unbind(k),c.one(k,function(){c.data("animationCallback",null),i()}),c.css(e)}else c.animate(e,f,a.bez(b[g+"_bezier"]),i)},H=function(a){if(s){var b=K();a.unbind(k),a.css(J(b)),typeof a.data("animationCallback")=="function"&&(a.data("animationCallback")(),a.data("animationCallback",null))}else a.stop()},I=function(){return z===null&&(z={durationProp:j+"-duration",timingFunctionProp:j+"-timing-function",timingFunction:{}}),z},J=function(a){var b={};if(s){if(y===null){var c=f?"3d":"",d=c==="3d"?"(Xpx,Ypx,0px)":"(Xpx,Ypx)",e={X:"Y",Y:"X"};y=["translate",c,d.replace(e[n.coOrd],"0")].join("")}b[i]=y.replace(n.coOrd,a)}else b[n.offsetName]=a+"px";return b},K=function(){if(!s)return m.position()[n.offsetName]-p;var a=m.css(i),b=a.match(/\-?[0-9]+/g),c=n.coOrd==="X"?b[4]:b[5];return parseInt(c)},L=function(c,d){var e=q,f,g,h=d>0?o.get().reverse():o,i,j,k="outer"+n.measure;return a.each(h,function(h,l){j=a(l),e=-1*Math.ceil(j.position()[n.offsetName]),i=l,d<0?(e-=b.startOffset,f=-1*e+j[k](!0),g=-1*c):(e+=b.endOffset,f=j.prev().length>0?e+j.prev()[k](!0):e,g=c);if(e*d>=c*d||f>g)return!1}),[i,e]},M=function(b,c){var d=c<0?"next":"prev",e=a(L(b,c)[0]),f=e;do f=f[d]();while(f.length>0&&f.position()[n.offsetName]===e.position()[n.offsetName]);return f},N=function(a,b,c){var b=b===0?u:b;return c?-1*Math.ceil(M(a,b).position()[n.offsetName]):L(a,b)[1]},O=function(){var a=K();return a===N(a,u,!1)},P=function(){l.trigger("rotoChange",[L(K(),1)[0]]),C=!1},Q=function(){w=0,o=m.children(),o.css({display:"block","float":"left"});if(b.direction==="h")o.each(function(b,c){w+=Math.ceil(a(c)["outer"+n.measure](!0))}),m[n.measure.toLowerCase()](w);else{var c=o.last();w=Math.round(a(c).position()[n.offsetName]+a(c)["outer"+n.measure](!0))}v=Math.ceil(l[n.measure.toLowerCase()]()),r=Math.ceil(w-v+p+b.endOffset)*-1;if(b.snap){var d=N(r,-1,!1);r=d>r?N(r,-1,!0):d}},R=function(){return F===null&&(F=typeof D=="object"&&typeof D.click=="function"&&typeof E=="object"&&typeof E.click=="function"),F},S=function(){if(!R())return;w>v-K()?E.removeAttr("disabled"):E.attr("disabled","disabled"),K()<q?D.removeAttr("disabled"):D.attr("disabled","disabled")},T=function(a){var b=typeof a;switch(b){case"number":U(a);break;case"object":V(a);break;case"string":X(a)}},U=function(b){if(b<0||b>=o.length)return;var c=a(o.get(b));V(c)},V=function(a){W(-1*a.position()[n.offsetName]+b.startOffset)},W=function(a){G(m,J(a),b.shift_duration,"shift",function(){S(),B=A.ready})},X=function(a){if(a!=="prev"&&a!=="next")return;dir=a==="prev"?1:-1,V(M(K(),dir))},Y=function(a){var c=0;if(B===A.shifting)return;B=A.shifting,u=a;var d=function(a){G(m,J(a),b.shift_duration,"shift",function(){S(),B=A.ready})};a<0?c=Math.max(N(K()-v+b.startOffset,a,!1),r):c=Math.min(N(K()+v-b.endOffset,a,!1),q),W(c)},Z=function(a){var c=Math.ceil(a+t),d;if(c<q&&c>r)d=c;else var e=c>q?c-q:c-r,d=c-e/b.pull_divisor;if(B!==A.tracking){var f={},g=I();f[g.durationProp]="0s",f[g.timingFunctionProp]="none",m.css(f)}B=A.tracking,m.css(J(d))},_=function(){var a=bb.getPointerSpeed(),c=a[0],d=a[1],e=K(),f=c*b.drift_factor*d,g=f+e;g>q?g=q:g<r?g=r:b.snap&&!O()&&(g=N(g,d,!0));if(g===e){P();return}B=A.drifting,G(m,J(g),b.drift_duration,"drift",function(){B=A.ready,S()})},ba=function(a){var c=a<0?r:q;B=A.bouncing,G(m,J(c),b.bounce_duration,"bounce",function(){B=A.ready,S()})},bb=function(){var a=0,c=0,d=0,e=null,f={startCoOrd:0,endCoOrd:0};return{start:function(){d=a=c,e=window.setInterval(function(){f.startCoOrd=a,f.endCoOrd=c,a=c},b.timer_interval)},stop:function(){clearInterval(e),f.endCoOrd=c},getPointerSpeed:function(){var a=f.endCoOrd-f.startCoOrd,c=Math.abs(a),e=c/b.timer_interval,g=a===0?f.endCoOrd-d:a,h=g<=0?g===0?0:-1:1;return h!==0&&(u=h),[e,h]},setCurrentCoOrd:function(a){c=a}}}(),bc=function(){Q(),S()};j==="-webkit-transition"&&m.css("-webkit-backface-visibility","hidden"),l.css({display:"block",overflow:"hidden",position:"relative"}),m.css({position:"relative",padding:0,margin:0}),m.css(J(b.startOffset)),D.length===0&&b.btnPrev===c.btnPrev&&l.attr("id")&&(D=a("#"+l.attr("id")+"-prev"),E=a("#"+l.attr("id")+"-next")),a(window).resize(function(){bc()}),m.bind(g.start+".roto."+x,function(b){B=A.ready,t=K(),H(m);var c=m.find("a"),d={};f||(b.preventDefault(),document.ondragstart!==undefined&&m.find("a, img").one("dragstart",function(a){a.preventDefault()}),c.length>0&&a(document).one(g.move+".roto."+x,function(b){c.one("click.roto."+x,function(a){a.preventDefault()}),a.each(c.data("events"),function(b,c){d[b]=[],a.each(c,function(a,c){d[b].push(c)})}),c.unbind(),c.bind("click.roto."+x,function(a){a.preventDefault()})})),b=h(b);var i=b[e+n.coOrd];bb.setCurrentCoOrd(i),a(document).bind(g.move+".roto."+x,function(a){a.preventDefault(),a=h(a),bb.setCurrentCoOrd(a[e+n.coOrd]),Z(a[e+n.coOrd]-i)}),a(document).one(g.end,function(){bb.stop(),K()>q||K()<r?ba(K()-q):_(),a(document).unbind(g.move+".roto."+x),!f&&c.length>0&&window.setTimeout(function(){c.unbind("click.roto."+x),a.each(d,function(b,d){a.each(d,function(a,b){c.bind(b.type+"."+b.namespace,b.data,b.handler)})})},250)}),bb.start()}),R()&&(D.click(function(){return Y(1)}),E.click(function(){return Y(-1)})),l.bind("rotoGoto",function(a,b){T(b)}),l.bind("rotoShift",function(a,b){Y(b)}),l.bind("rotoContentChange",function(){bc()}),bc(),p=Math.ceil(K()),p!==0&&Q()})}})(jQuery);
